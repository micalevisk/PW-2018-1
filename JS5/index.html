<!--
aluno: Micael Levi L. C. <mllc@icomp.ufam.edu.br>
matricula: 21554923
-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Exercíco 5 de JS</title>
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <h1>Um Gráfico de Barras</h1>
    <form name="grafico">
      <label for="hb1">Informe a altura das barras:</label>

      <input type="text" name="b1" value="100">
      <input type="text" name="b2" value="150">
      <input type="text" name="b3" value="120">
      <input type="text" name="b4" value="80">
      <input type="text" name="b5" value="40">
      <br>
      <br>
      <label for="largura">Informe a largura das barras:</label>
      <input type="text" name="wbarras" value="30">
      <br>
      <br>
      <input type="submit" value="Desenhar Gráfico" name="desenhar">
      <br>
      <br>
    </form>

    <table>
      <tr>
        <td>
          <div id="b1">
          </div>
        </td>
        <td>
          <div id="b2">
          </div>
        </td>
        <td>
          <div id="b3">
          </div>
        </td>
        <td>
          <div id="b4">
          </div>
        </td>
        <td>
          <div id="b5">
          </div>
        </td>
      </tr>
    </table>

    <script type="text/javascript">
      const QTD_BARRAS = 5;
      const PREFIXO_BARRA = 'b';
      const formGrafico = document.grafico;

      const getBarra = n => document.getElementById(PREFIXO_BARRA + n);
      const definirHeightEWidth = (numBarra, h, w) => {
        // Assumindo que não existe outro estilo sobre as DIVs:
        getBarra(numBarra).style.cssText = `height:${h}px; width:${w}px`;
        // Não sobrescreve outros estilos; 2 versões:
        /*
        Object.assign(getBarra(numBarra).style, {height: h + 'px', width: w + 'px'});
        */
        /*
        getBarra(numBarra).style.setProperty('height', h + 'px');
        getBarra(numBarra).style.setProperty('width', w + 'px');
        */
      }

      function atualizarGrafico() {
        const wbarras = formGrafico.wbarras.value;
        for (let i=1; i <= QTD_BARRAS; ++i)
          definirHeightEWidth(i, formGrafico[PREFIXO_BARRA + i].value.trim(), wbarras);
      }

      formGrafico.desenhar.onclick = function() {
        atualizarGrafico();
        return false;
      }

      // ----- EXTRA
      const inputsText = document.querySelectorAll('input[type=text]');
      Array.from(inputsText).forEach(input => {
        input.addEventListener('keyup', atualizarGrafico);
      });
    </script>
  </body>
</html>
